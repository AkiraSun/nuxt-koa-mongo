{"version":3,"sources":["webpack:///webpack/bootstrap d6dc754fb27eb3c0c890","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///./server/mongodb.js","webpack:///./nuxt.config.js","webpack:///./server/middlewares.js","webpack:///external \"koa\"","webpack:///external \"nuxt\"","webpack:///./server/controller/index.js","webpack:///./server/controller/user.controller.js","webpack:///./server/model/user.model.js","webpack:///./server/router.js","webpack:///./server/config.json","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-mount\"","webpack:///external \"koa-router\"","webpack:///external \"koa-session\"","webpack:///external \"mongoose\"","webpack:///external \"postcss-hexrgba\"","webpack:///external \"postcss-nested\"","webpack:///external \"postcss-responsive-type\"","webpack:///external \"regenerator-runtime\"","webpack:///./server/index.js"],"names":["mongoose","Promise","global","exports","connect","config","db","connection","on","console","log","error","once","module","head","title","meta","charset","name","content","hid","link","rel","type","href","script","css","loading","color","vendor","router","middleware","build","postcss","require","extend","ctx","isClient","rules","push","enforce","test","loader","exclude","vueLoader","find","options","loaders","sass","plugins","src","app","keys","CONFIG","key","maxAge","overwrite","httpOnly","signed","rolling","use","session","next","status","res","headersSent","throw","body","message","emit","bodyParser","mount","routes","user","UserController","request","username","password","User","findOne","err","doc","authUser","login","userSchema","Schema","String","default","model","middleware3","Date","now","middleware1","middleware2","users","get","id","parseInt","params","length","post","controller","logout","host","process","env","HOST","port","PORT","dev","nuxt","builder","middlewares","req","resolve","reject","render","promise","then","catch","listen","start"],"mappings":";;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;;;;;;;;;;;;ACAA;;AAEA;;AAEA,gDAAAA,CAASC,OAAT,GAAmBC,OAAOD,OAA1B;;AAEAE,QAAQH,QAAR,GAAmB,gDAAnB;;AAEA;AACAG,QAAQC,OAAR,GAAkB,YAAM;AACxB;AACEJ,EAAA,gDAAAA,CAASI,OAAT,CAAiB,oDAAAC,CAAOC,EAAxB;;AAEF;AACEN,EAAA,gDAAAA,CAASO,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAgC,iBAAS;AACvCC,YAAQC,GAAR,CAAY,UAAZ,EAAwBC,KAAxB;AACD,GAFD;AAGF;AACEX,EAAA,gDAAAA,CAASO,UAAT,CAAoBK,IAApB,CAAyB,MAAzB,EAAiC,YAAM;AACrCH,YAAQC,GAAR,CAAY,UAAZ;AACD,GAFD;;AAIA,SAAO,gDAAP;AACD,CAdD,C;;;;;;ACTAG,OAAOV,OAAP,GAAiB;AACf;;;AAGAW,QAAM;AACJC,WAAO,SADH;AAEJC,UAAM,CACJ,EAAEC,SAAS,OAAX,EADI,EAEJ,EAAEC,MAAM,UAAR,EAAoBC,SAAS,qCAA7B,EAFI,EAGJ,EAAEC,KAAK,aAAP,EAAsBF,MAAM,aAA5B,EAA2CC,SAAS,iBAApD,EAHI,CAFF;AAOJE,UAAM,CACJ,EAAEC,KAAK,MAAP,EAAeC,MAAM,cAArB,EAAqCC,MAAM,cAA3C,EADI,CAPF;AAUJC,YAAQ;AACN;AADM;AAVJ,GAJS;AAkBf;;;AAGAC,OAAK,CACH,uBADG,EAEH,sCAFG,CArBU;AAyBf;;;AAGAC,WAAS,EAAEC,OAAO,SAAT,EA5BM;AA6Bf;;;AAGAC,UAAQ,CACN,YADM,CAhCO;AAmCfC,UAAQ;AACNC,gBAAY;AADN,GAnCO;AAsCfC,SAAO;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGAC,aAAS,CACP,mBAAAC,CAAQ,EAAR,GADO,EAEP,mBAAAA,CAAQ,EAAR,GAFO,EAGP,mBAAAA,CAAQ,EAAR,GAHO,CAbJ;AAkBLC,UAlBK,kBAkBE9B,MAlBF,EAkBU+B,GAlBV,EAkBe;AAClB,UAAIA,IAAIC,QAAR,EAAkB;AAChBhC,eAAOQ,MAAP,CAAcyB,KAAd,CAAoBC,IAApB,CAAyB;AACvBC,mBAAS,KADc;AAEvBC,gBAAM,aAFiB;AAGvBC,kBAAQ,eAHe;AAIvBC,mBAAS;AAJc,SAAzB;AAMD;AACD,UAAMC,YAAYvC,OAAOQ,MAAP,CAAcyB,KAAd,CAAoBO,IAApB,CAAyB,UAACH,MAAD;AAAA,eAAYA,OAAOA,MAAP,KAAkB,YAA9B;AAAA,OAAzB,CAAlB;AACAE,gBAAUE,OAAV,CAAkBC,OAAlB,CAA0BC,IAA1B,GAAiC,yCAAjC;AACD;AA7BI,GAtCQ;AAqEfC,WAAS,CACP,EAACC,KAAK;AACN;AADA,GADO;AArEM,CAAjB,C;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAAe,UAACC,GAAD,EAAS;AACtBA,MAAIC,IAAJ,GAAW,CAAC,kBAAD,CAAX;AACA;AACA,MAAMC,SAAS;AACbC,SAAK,UADQ;AAEbC,YAAQ,QAFK;AAGbC,eAAW,IAHE;AAIbC,cAAU,IAJG;AAKbC,YAAQ,IALK;AAMbC,aAAS;;AAGX;AATe,GAAf,CAUAR,IAAIS,GAAJ,CAAQ,mDAAAC,CAAQR,MAAR,EAAgBF,GAAhB,CAAR;AACA;AACA;AACAA,MAAIS,GAAJ;AAAA,oLAAQ,iBAAOxB,GAAP,EAAY0B,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEEA,MAFF;;AAAA;;AAIJ;AACA,kBAAI1B,IAAI2B,MAAJ,KAAe,GAAf,IAAsB3B,IAAI4B,GAAJ,CAAQC,WAAR,KAAwB,KAAlD,EAAyD;AACvD7B,oBAAI8B,KAAJ,CAAU,GAAV;AACD;AACD;AACA;AACA;AACA,kBAAI9B,IAAI2B,MAAJ,KAAe,GAAf,IAAsB3B,IAAI4B,GAAJ,CAAQC,WAAR,KAAwB,KAAlD,EAAyD;AACvD;AACE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACAxD,wBAAQC,GAAR,CAAY,aAAZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AA/BG;AAAA;;AAAA;AAAA;AAAA;;AAiCJ0B,kBAAI2B,MAAJ,GAAa,YAAIA,MAAJ,IAAc,GAA3B;;AAEA3B,kBAAIb,IAAJ,GAAW,MAAX;AACAa,kBAAI+B,IAAJ,GAAW;AACTJ,wBAAQ3B,IAAI2B,MADH;AAETK,yBAAS,YAAIA;AAFJ,eAAX;;AAKAhC,kBAAIe,GAAJ,CAAQkB,IAAR,CAAa,OAAb,eAA2BjC,GAA3B;;AAzCI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAR;;AAAA;AAAA;AAAA;AAAA;;AA6CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACF;;AAEE;AACA;AACA;AACA;AACAe,MAAIS,GAAJ,CAAQ,sDAAAU,EAAR;;AAEA;AACA;AACAnB,MAAIS,GAAJ,CAAQ,iDAAAW,CAAM,MAAN,EAAc,+EAAAC,CAAOrB,GAAP,CAAd,CAAR;AACD,CArFD,C;;;;;;ACPA,gC;;;;;;ACAA,iC;;;;;;;;ACAA;AACA,4CAAe,EAACsB,MAAA,iEAAD,EAAf,C;;;;;;;;;;;;;;;;;;ACDA;;IAEqBC,c;;;;;;;;AACjB;;uMACiBtC,G;;;;;;;oCACcA,IAAIuC,OAAJ,CAAYR,I,EAAnCS,Q,qBAAAA,Q,EAAUC,Q,qBAAAA,Q;;uBACC,kEAAAC,CACJC,OADI,CACI,EAAE,YAAYH,QAAd,EAAwB,YAAYC,QAApC,EADJ,EACoD,UAACG,GAAD,EAAMC,GAAN,EAAc;AACrE,sBAAID,GAAJ,EAAS;AACPvE,4BAAQC,GAAR,CAAY,IAAZ;AACD;AACF,iBALI,C;;;AAAb+D,oB;;AAMN,oBAAIA,IAAJ,EAAU;AACV;AACErC,sBAAIyB,OAAJ,CAAYqB,QAAZ,GAAuB,EAAEN,UAAUH,KAAKG,QAAjB,EAAvB;AACAxC,sBAAI+B,IAAJ,GAAW;AACTS,8BAAUH,KAAKG,QADN;AAETO,2BAAO;AAFE,mBAAX;AAID,iBAPD,MAOO;AACL/C,sBAAI+B,IAAJ,GAAW;AACTC,6BAAS,SADA;AAETe,2BAAO;AAFE,mBAAX;AAID;;;;;;;;;;;;;;;;AAEJ;;;;;yMACqB/C,G;;;;;AAClB,uBAAOA,IAAIyB,OAAJ,CAAYqB,QAAnB;AACA9C,oBAAI+B,IAAJ,GAAW;AACTgB,yBAAO;AADE,iBAAX;;;;;;;;;;;;;;;;;;;;;4CA3BiBT,c;;;;;;;;ACFrB;;AAEA,IAAMU,aAAa,IAAI,kDAAApF,CAASqF,MAAb,CAAoB;;AAEvC;AACET,YAAU,EAAErD,MAAM+D,MAAR,EAAgBC,SAAS,EAAzB,EAH2B;;AAKvC;AACEV,YAAU;AACRtD,UAAM+D,MADE;AAERC,aAAS;AACL;AAHI;AAN2B,CAApB,CAAnB;;AAaA,IAAMT,OAAO,kDAAA9E,CAASwF,KAAT,CAAe,MAAf,EAAuBJ,UAAvB,EAAmC,MAAnC,CAAb;AACA,4CAAeN,IAAf,C;;;;;;;;;;;;;;;;;;AChBA;AACA;AACA,IAAMhD,SAAS,IAAI,kDAAJ,EAAf;AACA,IAAM2D;AAAA,kLAAc,iBAAOrD,GAAP,EAAY0B,IAAZ;AAAA;AAAA;AAAA;AAAA;AAClBrD,oBAAQC,GAAR,CAAY,QAAZ,EAAsBgF,KAAKC,GAAL,EAAtB;AADkB;AAAA,mBAEZ7B,MAFY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAd;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAKA,IAAM8B;AAAA,mLAAc,kBAAMxD,GAAN,EAAW0B,IAAX;AAAA;AAAA;AAAA;AAAA;AAClBrD,oBAAQC,GAAR,CAAY,wBAAZ;AADkB;AAAA,mBAEZoD,MAFY;;AAAA;AAGlBrD,oBAAQC,GAAR,CAAY,uBAAZ;;AAHkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAd;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAMA,IAAMmF;AAAA,mLAAc,kBAAMzD,GAAN,EAAW0B,IAAX;AAAA;AAAA;AAAA;AAAA;AAClBrD,oBAAQC,GAAR,CAAY,yBAAZ;AADkB;AAAA,mBAEZoD,MAFY;;AAAA;AAGlBrD,oBAAQC,GAAR,CAAY,wBAAZ;;AAHkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAd;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAMA;AACA,IAAMoF,QAAQ,CACZ,EAAE5E,MAAM,WAAR,EADY,EAEZ,EAAEA,MAAM,OAAR,EAFY,EAGZ,EAAEA,MAAM,WAAR,EAHY,CAAd;;AAMA,4CAAe,UAACiC,GAAD,EAAS;AACtB;AACArB,SAAOiE,GAAP,CAAW,GAAX,EAAgBH,WAAhB,EAA6BC,WAA7B,EAA0CJ,WAA1C;AAAA,qLAAuD,kBAAOrD,GAAP,EAAY0B,IAAZ;AAAA;AAAA;AAAA;AAAA;AACrD1B,kBAAIb,IAAJ,GAAW,MAAX;AACAa,kBAAI+B,IAAJ,GAAW;AACTC,yBAAS;AADA,eAAX;;AAFqD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAvD;;AAAA;AAAA;AAAA;AAAA;;AAOA;AACAtC,SAAOiE,GAAP,CAAW,QAAX;AAAA,qLAAqB,kBAAO3D,GAAP,EAAY0B,IAAZ;AAAA;AAAA;AAAA;AAAA;AACnB1B,kBAAIb,IAAJ,GAAW,MAAX;AACAa,kBAAI+B,IAAJ,GAAW2B,KAAX;;AAFmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAArB;;AAAA;AAAA;AAAA;AAAA;;AAKA;AACAhE,SAAOiE,GAAP,CAAW,YAAX;AAAA,qLAAyB,kBAAO3D,GAAP,EAAY0B,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBkC,gBADiB,GACZC,SAAS7D,IAAI8D,MAAJ,CAAWF,EAApB,CADY;;AAEvBvF,sBAAQC,GAAR,CAAYoF,MAAME,EAAN,CAAZ;AACA,kBAAIA,MAAM,CAAN,IAAWA,KAAKF,MAAMK,MAA1B,EAAkC;AAChC/D,oBAAI+B,IAAJ,GAAW2B,MAAME,EAAN,CAAX;AACD,eAFD,MAEO;AACL5D,oBAAI8B,KAAJ,CAAU,GAAV;AACD;;AAPsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAzB;;AAAA;AAAA;AAAA;AAAA;;AAUApC,SAAOsE,IAAP,CAAY,SAAZ,EAAuB,4DAAAC,CAAW5B,IAAX,CAAgB6B,MAAvC;AACAxE,SAAOsE,IAAP,CAAY,QAAZ,EAAsB,4DAAAC,CAAW5B,IAAX,CAAgBU,KAAtC;;AAEA,SAAOrD,OAAOC,UAAP,EAAP;AACD,CA9BD,C;;;;;;AC3BA,kBAAkB,0C;;;;;;ACAlB,2C;;;;;;ACAA,sC;;;;;;ACAA,uC;;;;;;ACAA,wC;;;;;;ACAA,qC;;;;;;ACAA,4C;;;;;;ACAA,2C;;;;;;ACAA,oD;;;;;;ACAA,gD;;;;;;;;;;;;;;;;;;;kLCKA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACQoB,eADR,GACc,IAAI,2CAAJ,EADd;AAEQoD,gBAFR,GAEeC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,WAFnC;AAGQC,gBAHR,GAGeH,QAAQC,GAAR,CAAYG,IAAZ,IAAoB,IAHnC;;AAKE;;AACIvG,kBANN,GAMe,mBAAA6B,CAAQ,CAAR,CANf;;AAOE7B,mBAAOwG,GAAP,GAAa,EAAE1D,IAAIsD,GAAJ,KAAY,YAAd,CAAb;;AAEA;AACMK,gBAVR,GAUe,IAAI,0CAAJ,CAASzG,MAAT,CAVf;AAWE;;AAXF,iBAYMA,OAAOwG,GAZb;AAAA;AAAA;AAAA;;AAaUE,mBAbV,GAaoB,IAAI,6CAAJ,CAAYD,IAAZ,CAbpB;AAAA;AAAA,mBAcUC,QAAQ/E,KAAR,EAdV;;AAAA;AAgBEgF,YAAA,oFAAAA,CAAY7D,GAAZ;AACA/C,YAAA,wEAAAA;AACA+C,gBAAIS,GAAJ;AAAA,+LAAQ,iBAAOxB,GAAP,EAAY0B,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACAA,MADA;;AAAA;AAEN1B,4BAAI2B,MAAJ,GAAa,GAAb,CAFM,CAEW;AACjB3B,4BAAI6E,GAAJ,CAAQpD,OAAR,GAAkBzB,IAAIyB,OAAtB;AAHM,yDAIC,IAAI5D,OAAJ,CAAY,UAACiH,OAAD,EAAUC,MAAV,EAAqB;AACtC/E,8BAAI4B,GAAJ,CAAQxD,EAAR,CAAW,OAAX,EAAoB0G,OAApB;AACA9E,8BAAI4B,GAAJ,CAAQxD,EAAR,CAAW,QAAX,EAAqB0G,OAArB;AACAJ,+BAAKM,MAAL,CAAYhF,IAAI6E,GAAhB,EAAqB7E,IAAI4B,GAAzB,EAA8B,mBAAW;AACvC;AACAqD,oCAAQC,IAAR,CAAaJ,OAAb,EAAsBK,KAAtB,CAA4BJ,MAA5B;AACD,2BAHD;AAID,yBAPM,CAJD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAR;;AAAA;AAAA;AAAA;AAAA;;AAcAhE,gBAAIqE,MAAJ,CAAWb,IAAX,EAAiBJ,IAAjB;AACA9F,oBAAQC,GAAR,CAAY,yBAAyB6F,IAAzB,GAAgC,GAAhC,GAAsCI,IAAlD,EAjCF,CAiC0D;;AAjC1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAec,K;;;;;;;AALf;AACA;AACA;AACA;;AAsCAA,Q","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d6dc754fb27eb3c0c890","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 0\n// module chunks = 0","import mongoose from 'mongoose'\n\nimport config from './config.json'\n\nmongoose.Promise = global.Promise\n\nexports.mongoose = mongoose\n\n// 数据库\nexports.connect = () => {\n// 连接数据库\n  mongoose.connect(config.db)\n\n// 连接错误\n  mongoose.connection.on('error', error => {\n    console.log('数据库连接失败!', error)\n  })\n// 连接成功\n  mongoose.connection.once('open', () => {\n    console.log('数据库连接成功!')\n  })\n\n  return mongoose\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/mongodb.js","module.exports = {\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'starter',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\n    ],\n    script: [\n      // { src: 'js/aliyun.js' }\n    ]\n  },\n  /*\n  ** Global CSS\n  */\n  css: [\n    '~assets/css/main.scss',\n    'element-ui/lib/theme-chalk/index.css'\n  ],\n  /*\n  ** Customize the progress-bar color\n  */\n  loading: { color: '#3B8070' },\n  /*\n   ** Build configuration\n   */\n  vendor: [\n    'element-ui'\n  ],\n  router: {\n    middleware: 'auth'\n  },\n  build: {\n    // babel: {\n    //   // plugins: [['component', [{\n    //   //   libraryName: 'element-ui',\n    //   //   styleLibraryName: 'theme-chalk'\n    //   // },\n    //   //   'transform-async-to-generator',\n    //   //   'transform-runtime'\n    //   // ]]]\n    // },\n    /*\n     ** Run ESLINT on save\n     */\n    postcss: [\n      require('postcss-nested')(),\n      require('postcss-responsive-type')(),\n      require('postcss-hexrgba')()\n    ],\n    extend(config, ctx) {\n      if (ctx.isClient) {\n        config.module.rules.push({\n          enforce: 'pre',\n          test: /\\.(js|vue)$/,\n          loader: 'eslint-loader',\n          exclude: /(node_modules)/\n        })\n      }\n      const vueLoader = config.module.rules.find((loader) => loader.loader === 'vue-loader')\n      vueLoader.options.loaders.sass = 'vue-style-loader!css-loader!sass-loader'\n    }\n  },\n  plugins: [\n    {src: '~plugins/element-ui'}\n    // {src: '~plugins/aliyun.js'}\n  ]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","// import serve from 'koa-static'\nimport bodyParser from 'koa-bodyparser'\nimport mount from 'koa-mount'\nimport session from 'koa-session'\nimport routes from './router'\n// 假设文件sessionStore.js 文件保存在 core的根目录\n\nexport default (app) => {\n  app.keys = ['some secret hurr']\n  // session 配置信息\n  const CONFIG = {\n    key: 'koa:sess',\n    maxAge: 10000000,\n    overwrite: true,\n    httpOnly: true,\n    signed: true,\n    rolling: false\n  }\n\n  // 以中间件的方式使用session\n  app.use(session(CONFIG, app))\n  // Catch and format the error in the upstream.\n  // https://github.com/koajs/koa/wiki/Error-Handling\n  app.use(async (ctx, next) => {\n    try {\n      await next()\n\n      // Handle 404 - throw it as an error.\n      if (ctx.status === 404 && ctx.res.headersSent === false) {\n        ctx.throw(404)\n      }\n      // Use this when you want to format the 200 res further.\n      // e.g. {\"status\":200,\"data\":{\"message\":\"Hello home sample!\"}}\n      // else, you get, e.g. {\"message\":\"Hello home sample!\"}\n      if (ctx.status === 200 && ctx.res.headersSent === false) {\n        // const session = ctx.session\n          // 给session赋值\n        // session.userInfo = {\n        //   name: 'anziguoer',\n        //   email: 'anziguoer@163.com',\n        //   age: 28\n        // }\n        // console.log(12345)\n        // console.log(ctx.session)\n        console.log('midddleware')\n        // if (!ctx.session && !ctx.session.authUser) {\n        //   ctx.redirect('/')\n        //   console.log(555)\n        // } else {\n        //   ctx.body = {\n        //     status: 200,\n        //     data: ctx.body\n        //   }\n        // }\n      }\n    } catch (err) {\n      ctx.status = err.status || 500\n\n      ctx.type = 'json'\n      ctx.body = {\n        status: ctx.status,\n        message: err.message\n      }\n\n      ctx.app.emit('error', err, ctx)\n    }\n  })\n\n  // app.use(ctx => {\n  //   // ignore favicon\n  //   if (ctx.path === '/favicon.ico') return\n\n  //   let n = ctx.session.views || 0\n  //   ctx.session.views = ++n\n  //   ctx.body = n + ' views'\n  // })\n  // Static files are files that clients download as they are from the server.\n  // Create a new directory, public. Koa, by default doesn't allow you to\n  // serve static files.\n  // https://github.com/koajs/static\n  // https://www.tutorialspoint.com/koajs/koajs_static_files.htm\n//   app.use(serve(config.static_dir.root))\n\n  // The parsed body will store in ctx.request.body\n  // If nothing was parsed, body will be an empty object {}\n  // https://github.com/koajs/bodyparser\n  // https://github.com/koajs/koa/issues/719\n  app.use(bodyParser())\n\n  // Add routes by group.\n  // const mount = require('koa-mount')\n  app.use(mount('/api', routes(app)))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/middlewares.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 5\n// module chunks = 0","import user from './user.controller'\nexport default {user}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controller/index.js","import User from '../model/user.model'\n\nexport default class UserController {\n    // 登录\n  static async login(ctx) {\n    const { username, password } = ctx.request.body\n    const user = await User\n                  .findOne({ 'username': username, 'password': password }, (err, doc) => {\n                    if (err) {\n                      console.log('错误')\n                    }\n                  })\n    if (user) {\n    // 数据库存在用户名密码，设置session，返回用户名\n      ctx.session.authUser = { username: user.username }\n      ctx.body = {\n        username: user.username,\n        login: true\n      }\n    } else {\n      ctx.body = {\n        message: '用户名密码错误',\n        login: false\n      }\n    }\n  }\n // 登出\n  static async logout(ctx) {\n    delete ctx.session.authUser\n    ctx.body = {\n      login: false\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controller/user.controller.js","import {mongoose} from '../mongodb'\n\nconst userSchema = new mongoose.Schema({\n\n// 名字\n  username: { type: String, default: '' },\n\n// 密码\n  password: {\n    type: String,\n    default: ''\n        //  crypto.createHash('md5').update(config.AUTH.defaultPassword).digest('hex')\n  }\n})\n\nconst User = mongoose.model('user', userSchema, 'user')\nexport default User\n\n\n\n// WEBPACK FOOTER //\n// ./server/model/user.model.js","import Router from 'koa-router'\nimport controller from './controller'\nconst router = new Router()\nconst middleware3 = async (ctx, next) => {\n  console.log('Time: ', Date.now())\n  await next()\n}\n\nconst middleware1 = async(ctx, next) => {\n  console.log(\"I'll be logged first. \")\n  await next()\n  console.log(\"I'll be logged last. \")\n}\n\nconst middleware2 = async(ctx, next) => {\n  console.log(\"I'll be logged second. \")\n  await next()\n  console.log(\"I'll be logged third. \")\n}\n\n// Dummy users.\nconst users = [\n  { name: 'Alexandre' },\n  { name: 'Pooya' },\n  { name: 'Sébastien' }\n]\n\nexport default (app) => {\n  // Home page.\n  router.get('/', middleware1, middleware2, middleware3, async (ctx, next) => {\n    ctx.type = 'json'\n    ctx.body = {\n      message: 'Hello World!'\n    }\n  })\n\n  // Get all users.\n  router.get('/users', async (ctx, next) => {\n    ctx.type = 'json'\n    ctx.body = users\n  })\n\n  // Get the user by id.\n  router.get('/users/:id', async (ctx, next) => {\n    const id = parseInt(ctx.params.id)\n    console.log(users[id])\n    if (id >= 0 && id < users.length) {\n      ctx.body = users[id]\n    } else {\n      ctx.throw(404)\n    }\n  })\n\n  router.post('/logout', controller.user.logout)\n  router.post('/login', controller.user.login)\n\n  return router.middleware()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/router.js","module.exports = {\"db\":\"mongodb://47.100.161.144:27017/des\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/config.json\n// module id = 10\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"koa-mount\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-mount\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"koa-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-session\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"postcss-hexrgba\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"postcss-hexrgba\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"postcss-nested\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"postcss-nested\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"postcss-responsive-type\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"postcss-responsive-type\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 19\n// module chunks = 0","import Koa from 'koa'\nimport { Nuxt, Builder } from 'nuxt'\nimport middlewares from './middlewares'\nimport {connect} from './mongodb'\n\nasync function start() {\n  const app = new Koa()\n  const host = process.env.HOST || '127.0.0.1'\n  const port = process.env.PORT || 3000\n\n  // Import and Set Nuxt.js options\n  let config = require('../nuxt.config.js')\n  config.dev = !(app.env === 'production')\n\n  // Instantiate nuxt.js\n  const nuxt = new Nuxt(config)\n  // Build in development\n  if (config.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  }\n  middlewares(app)\n  connect()\n  app.use(async (ctx, next) => {\n    await next()\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n    ctx.req.session = ctx.session\n    return new Promise((resolve, reject) => {\n      ctx.res.on('close', resolve)\n      ctx.res.on('finish', resolve)\n      nuxt.render(ctx.req, ctx.res, promise => {\n        // nuxt.render passes a rejected promise into callback on error.\n        promise.then(resolve).catch(reject)\n      })\n    })\n  })\n\n  app.listen(port, host)\n  console.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n}\n\nstart()\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}